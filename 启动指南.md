# 🚀 启动指南

## ✅ 所有依赖已安装完成

当前已安装的依赖：
- ✅ expo (~52.0.0)
- ✅ expo-asset (12.0.9) ← 已修复
- ✅ expo-font (14.0.9) ← 已修复
- ✅ expo-file-system
- ✅ expo-sharing
- ✅ react-native-paper
- ✅ react-native-vector-icons
- ✅ @react-navigation/native
- ✅ @react-navigation/bottom-tabs
- ✅ 所有其他依赖

## 🎯 立即启动

### 方式1: 使用清理启动脚本（推荐）
```bash
双击运行: 清理启动.bat
```

### 方式2: 命令行启动
```bash
npx expo start -c
```

### 方式3: 普通启动
```bash
npm start
# 或
双击运行: start.bat
```

## 📱 预期流程

### 1. 启动后会看到
```
Starting Metro Bundler
› Metro waiting on exp://192.168.x.x:8081
› Scan the QR code above with Expo Go (Android) or the Camera app (iOS)

› Press a │ open Android
› Press i │ open iOS simulator
› Press w │ open web

› Press r │ reload app
› Press m │ toggle menu
```

### 2. 在手机上操作
1. 打开 Expo Go 应用
2. 扫描终端显示的二维码
3. 等待加载（首次约30秒）

### 3. 应用加载成功后
看到底部4个标签：
- 📊 活动统计
- 🌊 巡护评测
- 📈 综合统计
- ⚙️ 设置

## 🎨 应用界面预览

### 首页（活动统计）
- 输入框：目标日期
- 按钮：开始统计、导出Excel
- 显示：统计摘要、数据表格

### 巡护评测
- 切换：河流评测/河流巡护
- 输入框：开始日期
- 按钮：开始爬取、导出Excel
- 显示：统计摘要、用户排名

### 综合统计
- 输入框：开始日期
- 按钮：开始统计、导出Excel
- 显示：综合排名表格

### 设置
- Token配置
- 组织ID设置
- 保存/清除按钮

## ⚙️ 首次使用设置

### 1. 配置Token
1. 点击底部"设置"标签
2. 从浏览器获取Token：
   - 访问 https://xhbr.rwan.org.cn
   - 登录后按F12
   - Network标签
   - 复制Authorization请求头
3. 粘贴到Token输入框
4. 点击"保存设置"

### 2. 测试功能
1. 进入"活动统计"
2. 输入日期：2025-01-01
3. 点击"开始统计"
4. 等待数据加载

## 🐛 常见问题

### Q: 启动时报错缺少包
A: 运行 `npx expo install --fix`

### Q: 加载很慢
A: 首次加载需要下载JavaScript bundle，正常现象

### Q: 二维码扫不出来
A:
1. 确保手机和电脑在同一WiFi
2. 检查防火墙设置
3. 尝试使用 `npx expo start --tunnel`

### Q: 白屏或卡住
A:
1. 清理缓存：`npx expo start -c`
2. 重启Metro：按 `r`
3. 重新加载应用：在Expo Go中摇晃手机 → Reload

### Q: Token认证失败
A:
1. 检查Token格式（必须以"Bearer "开头）
2. Token可能过期，重新获取
3. 确保完整复制了Token

## 📝 快速测试清单

启动成功后的测试：
- [ ] 能看到4个底部标签
- [ ] 能切换标签
- [ ] 进入设置页面
- [ ] 能输入Token
- [ ] 保存Token成功
- [ ] 进入活动统计
- [ ] 能输入日期
- [ ] 点击开始统计（测试API）

## 🎉 准备就绪！

现在运行：
```bash
双击: 清理启动.bat
```

或命令行：
```bash
npx expo start -c
```

然后用 Expo Go 扫码即可！

---

**状态**: ✅ 所有依赖已安装，准备启动
**下一步**: 运行启动脚本
**文档**: 查看 README.md 了解更多详情
